{% extends 'cinema_base.html' %}
{% block content %}

<style>
  .main-banner {
    width: 100%;
    max-height: 400px;
    object-fit: cover;
    border-radius: 4px;
    margin-bottom: 20px;
  }

  .section-title {
    text-align: center;
    font-size: 32px;
    margin: 20px 0;
    font-weight: bold;
  }

  .page-layout {
    display: flex;
    gap: 20px;
    align-items: flex-start;
  }

  .promotions-section {
    flex: 3;
    background-color: #004080; /* —Ç–µ–º–Ω–æ-—Å–∏–Ω–∏–π —Ñ–æ–Ω */
    padding: 20px;
    border-radius: 4px;

    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
  }

  .promotion-item {
    background-color: white;
    border-radius: 4px;
    overflow: hidden;
  }

  .promotion-item img {
    width: 100%;
    height: 150px;
    object-fit: cover;
  }

  .promotion-info {
    padding: 10px;
  }

  .promotion-name {
    font-size: 18px;
    font-weight: bold;
    margin-bottom: 5px;
  }

  .promotion-date {
    font-size: 14px;
    color: #555;
    margin-bottom: 10px;
  }

  .promotion-description {
    font-size: 14px;
  }

  .right-banners {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .right-banners img, .banner-placeholder {
    width: 100%;
    height: 250px; /* –∫–∞–∫ –Ω–∞ —Ç–≤–æ–µ–º —Ñ–æ—Ç–æ */
    object-fit: cover;
    border-radius: 4px;
  }

  .banner-placeholder {
    background-color: #ccc;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #666;
    font-weight: bold;
  }
</style>

<!-- üî∑ –ë–æ–ª—å—à–æ–π –±–∞–Ω–Ω–µ—Ä -->
{% if main_banner %}
  <img src="{{ main_banner.url }}" alt="–ë–∞–Ω–Ω–µ—Ä" class="main-banner">
{% else %}
  <div class="main-banner" style="background-color: #ccc; display: flex; align-items: center; justify-content: center; color: #666; font-weight: bold;">
    –ë–ê–ù–ù–ï–†
  </div>
{% endif %}

<!-- üî∑ –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
<div class="section-title">–ê–∫—Ü–∏–∏ –∏ –°–∫–∏–¥–∫–∏</div>

<!-- üî∑ –û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
<div class="page-layout">

  <!-- üî∑ –ë–ª–æ–∫ –∞–∫—Ü–∏–π -->
  <div class="promotions-section">
    {% for promo in promotions %}
      <div class="promotion-item">
        {% if promo.main_image %}
          <img src="{{ promo.main_image.url }}" alt="{{ promo.name_about }}">
        {% else %}
          <div style="width:100%; height:150px; background-color:#ccc; display:flex; align-items:center; justify-content:center; color:#666; font-weight:bold;">
            –§–û–¢–û
          </div>
        {% endif %}

        <div class="promotion-info">
          <div class="promotion-name">{{ promo.name_about }}</div>
          <a href="{% url 'action_detail' promo.id %}">{{ promo.name_about }}</a>
          <div class="promotion-date">–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏: {{ promo.date_publication }}</div>
          <div class="promotion-description">{{ promo.description|safe }}</div>
        </div>
      </div>
    {% empty %}
      <p style="color:white;">–ù–µ—Ç –∞–∫—Ü–∏–π</p>
    {% endfor %}
  </div>

  <!-- üî∑ –ë–ª–æ–∫ –ø—Ä–∞–≤—ã—Ö –±–∞–Ω–Ω–µ—Ä–æ–≤ -->

  <div class="right-banners">
    {% for banner in side_banners %}
      {% if banner %}
        <img src="{{ banner.image_main.url }}" alt="–ë–∞–Ω–Ω–µ—Ä">
      {% else %}
        <div class="banner-placeholder">–ë–ê–ù–ù–ï–†</div>
      {% endif %}
    {% endfor %}

    {# –î–æ–±–∞–≤–ª—è–µ–º placeholder, –µ—Å–ª–∏ –±–∞–Ω–Ω–µ—Ä–æ–≤ –º–µ–Ω—å—à–µ 3 #}
    {% for i in "123"|slice:":3" %}
      {% if forloop.counter > side_banners|length %}
        <div class="banner-placeholder">–ë–ê–ù–ù–ï–†</div>
      {% endif %}
    {% endfor %}
  </div>

</div>

{% endblock %}